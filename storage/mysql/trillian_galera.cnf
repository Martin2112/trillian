# Example config file for Trillian log on a reasonable spec server with
# 4GB of ram.
#
# Assumes 3 nodes: data1, data2 and data3. Update as applicable, might want
# to use IP addresses.
#
mysqld]
binlog_format=ROW
default-storage-engine=innodb
innodb_autoinc_lock_mode=2
innodb_locks_unsafe_for_binlog=1
query_cache_size=0
query_cache_type=0
bind-address=0.0.0.0
# Set this correctly
datadir=/var/lib/mysql
innodb_log_file_size=100M
innodb_file_per_table
# Set this to zero for more safety but lower write performance
innodb_flush_log_at_trx_commit=2
wsrep_provider=/usr/lib/galera/libgalera_smm.so
# Set this to correct cluster hosts
wsrep_cluster_address="gcomm://data1,data2,data3"
wsrep_cluster_name='galera_cluster'
wsrep_node_address='data1' # Update this to match the server
wsrep_node_name='data1' # Update this to match the server
wsrep_sst_method=rsync
# Set this to the configured state transfer user and credentials
wsrep_sst_auth=sst_user:dbpass

# Tuning tweaks
innodb_buffer_pool_size=2G
innodb_buffer_pool_instances=2
wsrep_slave_threads=8 # Set this to 2 x number of cores on server
join_buffer_size=1M
innodb_log_files_in_group=2
innodb_log_file_size=256M
thread_cache_size=512
sort_buffer_size=1M
read_rnd_buffer_size=1M

